\ProvidesPackage{./99-style/titlepage}


%---------%
% OPTIONS %
%---------%

% load packages if not done already
\@ifpackageloaded{amsmath}{}{\usepackage{amsmath}}
\@ifpackageloaded{pgfplots}{}{\usepackage{pgfplots}}
\@ifpackageloaded{tikz}{}{\usepackage{tikz}}
\@ifpackageloaded{epigraph}{}{\usepackage{epigraph}}


%-----------%
% TITLEPAGE %
%-----------%

\renewcommand\epigraphflush{flushleft}
\renewcommand\epigraphsize{\normalsize}
\renewcommand\beforeepigraphskip{10ex}
\setlength\epigraphwidth{180pt}

\DeclareFixedFont{\titlefont}{T1}{qbk}{m}{n}{28}

\makeatletter
\def\printauthor{%
	{\large \@author}}
\def\printtitle{%
	{\@title}}
\makeatother

% The following code is borrowed from: http://tex.stackexchange.com/a/86310/10898
\newcommand\titlepagedecoration{%
	\begin{tikzpicture}[remember picture,overlay,shorten >= -10pt]
		\coordinate (aux1) at ([yshift=-15pt]current page.north east);
		\coordinate (aux2) at ([yshift=-410pt]current page.north east);
		\coordinate (aux3) at ([xshift=-4.5cm]current page.north east);
		\coordinate (aux4) at ([yshift=-150pt]current page.north east);
		
		\begin{scope}[titlepagecolor!40,line width=12pt,rounded corners=12pt]
			\draw
			(aux1) -- coordinate (a)
			++(225:5) --
			++(-45:5.1) coordinate (b);
			\draw[shorten <= -10pt]
			(aux3) --
			(a) --
			(aux1);
			\draw[opacity=0.6,titlepagecolor,shorten <= -10pt]
			(b) --
			++(225:2.2) --
			++(-45:2.2);
		\end{scope}
		\draw[titlepagecolor,line width=8pt,rounded corners=8pt,shorten <= -10pt]
		(aux4) --
		++(225:0.8) --
		++(-45:0.8);
		\begin{scope}[titlepagecolor!70,line width=6pt,rounded corners=8pt]
			\draw[shorten <= -10pt]
			(aux2) --
			++(225:3) coordinate[pos=0.45] (c) --
			++(-45:3.1);
			\draw
			(aux2) --
			(c) --
			++(135:2.5) --
			++(45:2.5) --
			++(-45:2.5) coordinate[pos=0.3] (d);   
			\draw 
			(d) -- +(45:1);
		\end{scope}
	\end{tikzpicture}%
}

\newcommand{\customtitle}{
	\begin{titlepage}
		\vspace*{37ex}
		\noindent
		{\titlefont\printtitle}\par
		\epigraph{Compendium in the interesting fields of Math, Statistics, Machine~Learning, Robotics and Robot~Learning that made the years of my study a fulfilling time.}%
		{\textit{Darmstadt 2015}\\ \textsc{Thomas hesse}}
		\null\vfill
		\noindent
		\hfill
		\begin{minipage}{0.35\linewidth}
			\begin{flushright}
				\printauthor
			\end{flushright}
		\end{minipage}
		\hspace*{10pt}
		\begin{minipage}{0.02\linewidth}
			\rule{1pt}{125pt}
		\end{minipage}
		\titlepagedecoration
	\end{titlepage}
}
